<!-- Navigation Bar -->
<nav class='navbar navbar-expand-lg navbar-light bg-light'>
  <div class='container-fluid'>
    <a class='navbar-brand' href='#'>
      <i class='fab fa-icon'></i>
    </a>
    <button
      class='navbar-toggler'
      type='button'
      data-bs-toggle='collapse'
      data-bs-target='#navbar-collapse'
    >
      <span class='navbar-toggler-icon'></span>
    </button>
    <div class='collapse navbar-collapse' id='navbar-collapse'>
      <ul class='navbar-nav ms-auto'>
        <li class='nav-item'>
          <a class='nav-link' href='/login'>
            <i class='fas fa-home'></i>
            Home
          </a>
        </li>
        <li class='nav-item'>
          <a class='nav-link' id='profile-button' href='/login'>
            <i class='fas fa-user'></i>
            Dashboard
          </a>
        </li>
        <li class='nav-item'>
          <a class='nav-link logout-link' href='/signup'>
            <i class='fas fa-sign-out-alt'></i>
            Sign Up</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Content Area -->
<div class="container mt-3 bg-light">
  <div class="row">
    <!-- Left Column -->
    <div class="col-md-4 col">
      <div class="profile-card">
        <div class="custom-card-header">
          <h5 class="pt-2 px-2">Profile</h5>
        </div>
        <div class="card-body d-flex flex-column p-2 m-2">
          {{#if users.profilePic}}
          <img src='{{users.profilePic}}' alt="Profile Picture" class="img-fluid rounded-circle mb-3 align-self-center" width='150px' height='150px'>
          {{else}}
          <img 
            src='https://media.istockphoto.com/id/1214428300/vector/default-profile-picture-avatar-photo-placeholder-vector-illustration.jpg?s=612x612&w=0&k=20&c=vftMdLhldDx9houN4V-g3C9k0xl6YeBcoB_Rk6Trce0=' 
            alt="Profile Picture" class="img-fluid rounded-circle mb-3 align-self-center" width='150px' height='150px'>
          {{/if}}
          {{#if users.name}}
          <h4 class='align-self-start'>{{users.name}}</h4>
          <a class="text-muted align-self-start" href="mailto:{{users.email}}">{{users.email}}</a>
          <ul class="align-self-start list-unstyled">
            <div class='profile-bio'>
                {{else}}
                <h4 class='align-self-start'>Sign Up or Login</h4>
          <a class="text-muted align-self-start" href=""></a>
          <ul class="align-self-start list-unstyled">
            <div class='profile-bio'>
{{/if}}
              {{#if users.userBio}}
              <p id="userBio">{{users.userBio}}</p>
              {{else}}
              <p>Sign Up Today To Create And Update your profile!</p>
              {{/if}}
            </div>
          </ul>
        </div>
      </div>
    </div>

    <!-- Middle Column -->
     <div class="col-md-8">
      <div class="profile-card">
        <div class="card-header">
           <h5>What's happening?</h5>
        </div>
        <div class="card-body">
  <form>
  <div class="form-group">
    <label for="post_title">Post Title:</label>
   <input class="form-control" id="post_title" placeholder="Enter post title"></input>
  </div>
  <div class="form-group">
    <label for="user_inputbox">Post Body:</label>
    <textarea class="form-control" id="user_inputbox" placeholder="Write something..." rows="3"></textarea>
  </div>
  <button type="submit" class="btn btn-primary post_btn m-2">Post</button>
</form>
</div>
</div>


    {{#each posts as |post|}}
    <article class='profile-card'>
      <div class='card-body bg-light'>
        <div class='row d-flex align-items-center'>
          <div class='col-sm-3 p-2 m-1 d-flex flex-column' id='user-info'>
            {{#if post.user.profilePic}}
              <img
                src='{{post.user.profilePic}}'
                class='rounded-circle align-self-center'
                alt='{{post.user.name}} profile picture'
                width='50'
                height='50'
              />
            {{else}}
              <img
                src='https://media.istockphoto.com/id/1214428300/vector/default-profile-picture-avatar-photo-placeholder-vector-illustration.jpg?s=612x612&w=0&k=20&c=vftMdLhldDx9houN4V-g3C9k0xl6YeBcoB_Rk6Trce0='
                class='rounded-circle align-self-center'
                alt='Default profile picture'
                width='50'
                height='50'
              />
            {{/if}}
            <p class='post_user align-self-center'>{{post.user.name}}</p>
            <p class='post_date align-self-center'>{{format_date post.date_created}}</p>
          </div>
          <div class='col-sm-8 p-2 m-1 d-flex flex-column' id='contents' style="overflow: auto;">
            <p class='post_content align-self-center align-self-center' style="word-wrap: break-word; overflow-wrap: break-word;"><strong>{{post.title}}</strong></p>
            <p class='post_content align-self-center'>{{post.content}}</p>
          </div>
        </div>
        <div class='col-sm-12 m-1'>
          <a href='/login'><i class='far fa-comment'></i>
            {{#if post.comments.length}}
              {{#with post.comments}}
                {{post.comments.length}}
              {{/with}}
            {{else}}
              0
            {{/if}}
          </a>
        </div>
      </div>
    </article>
    {{/each}}
  </div>
</div>

<script src="/postNotLoggedIn.js" type="text/javascript"></script>